(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{16:function(e,t,n){},36:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var r,c=n(0),a=n(19),s=n.n(a),o=(n(36),n(31));!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.KeyUp="KeyW",e.KeyDown="KeyS",e.KeyLeft="KeyA",e.KeyRight="KeyD",e.NewGame="KeyN",e.EscapeSettings="Escape"}(r||(r={}));var i=100,l=10,u=(n(16),n(13)),j=n(20),d=n.p+"static/media/bensound-dreams.c705f4ca.mp3",f=n.p+"static/media/throw.1e583756.mp3",h=n(7),b=n(6),p=n(63),m=function(e,t){return t.filter((function(t){return!e.find((function(e){return e.row===t.row&&e.col===t.col}))}))},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=m(t,e),c=[];return Array(n).fill(0).forEach((function(n){c.push(Object(h.a)(Object(h.a)({},r[Math.floor(Math.random()*r.length)]),{},{value:2,key:Object(p.a)(),appeared:!0})),r=m([].concat(Object(b.a)(t),c),e)})),[].concat(Object(b.a)(t),c)},g=function(e){return e.reduce((function(e,t,n,r){if(n+1<r.length&&t.value===r[n+1].value&&!t.shouldDelete){var c=Object(h.a)(Object(h.a)({},t),{},{key:Object(p.a)(),value:t.value&&(t.value*=2),merged:!0});t.shouldDelete=!0,r[n+1].shouldDelete=!0,e.push(c,t)}else e.push(t);return e}),[])},v=function(e,t,n){switch(t){case"right":e.sort((function(e,t){return t.col-e.col}));var r=n;return g(e).map((function(e,t,n){return e.col=r,n[t+1]&&!n[t+1].shouldDelete&&(r-=1),e})).sort((function(e,t){return e.col-t.col}));case"left":e.sort((function(e,t){return e.col-t.col}));var c=1;return g(e).map((function(e,t,n){return e.col=c,n[t+1]&&!n[t+1].shouldDelete&&(c+=1),e}));case"up":e.sort((function(e,t){return e.row-t.row}));var a=1;return g(e).map((function(e,t,n){return e.row=a,n[t+1]&&!n[t+1].shouldDelete&&(a+=1),e}));case"down":e.sort((function(e,t){return t.row-e.row}));var s=n;return g(e).map((function(e,t,n){return e.row=s,n[t+1]&&!n[t+1].shouldDelete&&(s-=1),e})).sort((function(e,t){return e.row-t.row}))}},w=function(e,t,n){var r=e.filter((function(e){return!e.shouldDelete}));switch(r.forEach((function(e){delete e.appeared,delete e.merged})),t){case"right":case"left":return function(e,t){return Array.from({length:t}).map((function(t,n){return e.filter((function(e){return e.row===n+1}))}))}(r,n).map((function(e){return v(e,t,n)})).flat();case"up":case"down":return function(e,t){return Array.from({length:t}).map((function(t,n){return e.filter((function(e){return e.col===n+1}))}))}(r,n).map((function(e){return v(e,t,n)})).flat()}},x=n(28),y=n(23),N=n(1),A=function(e){var t=e.tile,n=e.enterLeaveStyles,r=function(e,t){switch(e.value){case 2:case 4:case 8:case 16:case 32:case 64:return.55*t;case 128:case 256:case 512:return.45*t;case 1024:case 2048:return.35*t}}(t,i),c=Object(y.b)({top:110*(t.row-1)+l,left:110*(t.col-1)+l,config:{duration:150},height:i,width:i,fontSize:r});return Object(N.jsx)(y.a.div,{className:"Tile Value-".concat(t.value," ").concat(t.merged?"Merged":""),style:Object(h.a)(Object(h.a)({},c),n),children:t.value})},S=function(e){var t=e.tileList;return Object(N.jsx)("div",{children:Object(N.jsx)(x.Transition,{items:t,keys:t.map((function(e){return e.key})),from:function(e){return e.merged?{transform:"scale(1)"}:{transform:"scale(0)"}},enter:{transform:"scale(1)"},leave:{transform:"scale(0)"},config:{duration:0},children:function(e){return function(t){return Object(N.jsx)(A,{tile:e,enterLeaveStyles:t},e.key)}}})})},D=n(12),k=function(e){var t=e.startNewGame,n=e.toggleMusic,r=e.musicConfig,c=e.openSettings;return Object(N.jsxs)("div",{className:"Controls",children:[Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return n()},title:r.title,children:Object(N.jsx)(D.a,{icon:["fas",r.icon]})})}),Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return t()},title:"New game (N)",children:Object(N.jsx)(D.a,{icon:["fas","gamepad"]})})}),Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return c()},title:"Game settings (S)",children:Object(N.jsx)(D.a,{icon:["fas","cog"]})})})]})},K=function(e){var t=e.openModal;return Object(N.jsx)("div",{className:"Settings ".concat(t&&"OpenModal")})},L=function(e){var t,n=e.size,a={musicOn:!1,icon:"music",title:"Play music (M)"},s={musicOn:!0,icon:"stop",title:"Play music (M)"},o=Object(c.useState)([]),h=Object(u.a)(o,2),p=h[0],m=h[1],g=Object(j.a)(d),v=Object(u.a)(g,2),x=v[0],y=v[1],A=y.stop,D=y.sound,L=(y.pause,Object(c.useState)(a)),W=Object(u.a)(L,2),C=W[0],M=W[1],E=Object(c.useState)(!1),B=Object(u.a)(E,2),G=B[0],R=B[1],F=(t=n,Array.from({length:t}).reduce((function(e,n,r){return e.push.apply(e,Object(b.a)(Array.from({length:t},(function(e,t){return{row:r+1,col:t+1}})))),e}),[])),I=Array.from({length:n},(function(e,t){return Object(N.jsx)("div",{className:"Row",style:{height:i,marginBottom:l},children:Array.from({length:n},(function(e,t){return Object(N.jsx)("div",{className:"Cell",style:{height:i,width:i,marginRight:l}},"cell-col-".concat(t+1))}))},"cell-row-".concat(t+1))})),T=Object(j.a)(f),U=Object(u.a)(T,1)[0];Object(c.useEffect)((function(){var e=function(e){var t=e.code,c=U,a="";if(t===r.ArrowUp||t===r.KeyUp?(a="up",c=U):t===r.ArrowDown||t===r.KeyDown?(c=U,a="down"):t===r.ArrowRight||t===r.KeyRight?(c=U,a="right"):t===r.ArrowLeft||t===r.KeyLeft?(c=U,a="left"):t===r.EscapeSettings&&R(!1),a){c();var s=w(p,a,n),o=O(F,s,2);m(o),a=""}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[p]);var P={height:450,width:450,padding:l};return Object(N.jsxs)("div",{className:"GameWrapper",children:[Object(N.jsxs)("div",{className:"BoardWrapper",style:P,children:[Object(N.jsx)("div",{className:"GridWrapper",children:I}),Object(N.jsx)(S,{tileList:p})]}),Object(N.jsx)(k,{startNewGame:function(){A(),M(s),m(O(F,[],2)),x(),D.fade(0,.2,2e3)},toggleMusic:function(){C.musicOn?(A(),D.fade(.2,0,2e3),M(a)):(x(),D.fade(0,.2,2e3),M(s))},musicConfig:C,openSettings:function(){R(!0)}}),Object(N.jsxs)("div",{className:"Description",children:[Object(N.jsx)("h3",{children:"Controlls:"}),Object(N.jsxs)("p",{children:[Object(N.jsx)("b",{children:"Gameplay"}),":  Arrows or W, S, A, D"]}),Object(N.jsxs)("p",{children:[Object(N.jsx)("b",{children:"Start new game"}),":  N"]}),Object(N.jsxs)("p",{children:[Object(N.jsx)("b",{children:"Start/stop music"}),":  M"]}),Object(N.jsxs)("p",{children:[Object(N.jsx)("b",{children:"Game settings"}),":  C"]}),Object(N.jsxs)("p",{children:[Object(N.jsx)("b",{children:"Escape game settings"}),":  Esc"]})]}),Object(N.jsx)(K,{openModal:G})]})};var W=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(L,{size:4})})},C=function(e){e&&e instanceof Function&&n.e(4).then(n.bind(null,64)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},M=n(10),E=n(29),B=n(8);M.b.add(B.a,B.d,B.g,B.c,E.a,B.e,B.f,B.b);var G=function(){return Object(N.jsx)("div",{className:"Header",children:Object(N.jsx)("h1",{className:"Title",children:"2048"})})};var R=function(){return Object(N.jsxs)("div",{className:"Footer",children:[Object(N.jsx)("div",{className:"HrefWrapper",title:"Author",children:Object(N.jsxs)("a",{href:"https://github.com/GYegor",target:"_blank",children:[Object(N.jsx)("p",{children:Object(N.jsx)(D.a,{className:"FaIcon",icon:["fab","github"]})}),Object(N.jsx)("p",{children:"GYegor"})]})}),Object(N.jsx)("div",{className:"HrefWrapper",title:"Rolling Scopes School",children:Object(N.jsx)("a",{href:"https://rs.school/js/",target:"_blank",children:Object(N.jsx)("img",{src:"https://rs.school/images/rs_school_js.svg",alt:"RSSchool logo"})})})]})},F=Object(N.jsx)(o.a,{children:Object(N.jsxs)("div",{className:"Main",children:[Object(N.jsx)(G,{}),Object(N.jsx)(W,{}),Object(N.jsx)("div",{className:"Spacer"}),Object(N.jsx)(R,{})]})});s.a.render(F,document.getElementById("root")),C()}},[[60,1,2]]]);
//# sourceMappingURL=main.75c2c776.chunk.js.map