(this["webpackJsonpreact-game"]=this["webpackJsonpreact-game"]||[]).push([[0],{16:function(e,t,r){},36:function(e,t,r){},60:function(e,t,r){"use strict";r.r(t);var n,c=r(0),a=r(19),o=r.n(a),i=(r(36),r(31));!function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.KeyUp="KeyW",e.KeyDown="KeyS",e.KeyLeft="KeyA",e.KeyRight="KeyD"}(n||(n={}));var s=4500/67,u=s/10,l=(r(16),r(14)),f=r(20),j=r.p+"static/media/bensound-dreams.c705f4ca.mp3",d=r.p+"static/media/throw.1e583756.mp3",h=r(7),m=r(6),b=r(63),p=function(e,t){return t.filter((function(t){return!e.find((function(e){return e.row===t.row&&e.col===t.col}))}))},O=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=p(t,e),c=[];return Array(r).fill(0).forEach((function(r){c.push(Object(h.a)(Object(h.a)({},n[Math.floor(Math.random()*n.length)]),{},{value:2,key:Object(b.a)(),appeared:!0})),n=p([].concat(Object(m.a)(t),c),e)})),[].concat(Object(m.a)(t),c)},g=function(e){return e.reduce((function(e,t,r,n){if(r+1<n.length&&t.value===n[r+1].value&&!t.shouldDelete){var c=Object(h.a)(Object(h.a)({},t),{},{key:Object(b.a)(),value:t.value&&(t.value*=2),merged:!0});t.shouldDelete=!0,n[r+1].shouldDelete=!0,e.push(c,t)}else e.push(t);return e}),[])},v=function(e,t,r){switch(t){case"right":e.sort((function(e,t){return t.col-e.col}));var n=r;return g(e).map((function(e,t,r){return e.col=n,r[t+1]&&!r[t+1].shouldDelete&&(n-=1),e})).sort((function(e,t){return e.col-t.col}));case"left":e.sort((function(e,t){return e.col-t.col}));var c=1;return g(e).map((function(e,t,r){return e.col=c,r[t+1]&&!r[t+1].shouldDelete&&(c+=1),e}));case"up":e.sort((function(e,t){return e.row-t.row}));var a=1;return g(e).map((function(e,t,r){return e.row=a,r[t+1]&&!r[t+1].shouldDelete&&(a+=1),e}));case"down":e.sort((function(e,t){return t.row-e.row}));var o=r;return g(e).map((function(e,t,r){return e.row=o,r[t+1]&&!r[t+1].shouldDelete&&(o-=1),e})).sort((function(e,t){return e.row-t.row}))}},w=function(e,t,r){var n=e.filter((function(e){return!e.shouldDelete}));switch(n.forEach((function(e){delete e.appeared,delete e.merged})),t){case"right":case"left":return function(e,t){return Array.from({length:t}).map((function(t,r){return e.filter((function(e){return e.row===r+1}))}))}(n,r).map((function(e){return v(e,t,r)})).flat();case"up":case"down":return function(e,t){return Array.from({length:t}).map((function(t,r){return e.filter((function(e){return e.col===r+1}))}))}(n,r).map((function(e){return v(e,t,r)})).flat()}},x=r(28),y=r(23),N=r(1),A=function(e){var t=e.tile,r=e.enterLeaveStyles,n=function(e,t){switch(e.value){case 2:case 4:case 8:case 16:case 32:case 64:return.55*t;case 128:case 256:case 512:return.45*t;case 1024:case 2048:return.35*t}}(t,s),c=Object(y.b)({top:73.88059701492537*(t.row-1)+u,left:73.88059701492537*(t.col-1)+u,config:{duration:150},height:s,width:s,fontSize:n});return Object(N.jsx)(y.a.div,{className:"Tile Value-".concat(t.value," ").concat(t.merged?"Merged":""),style:Object(h.a)(Object(h.a)({},c),r),children:t.value})},D=function(e){var t=e.tileList;return Object(N.jsx)("div",{children:Object(N.jsx)(x.Transition,{items:t,keys:t.map((function(e){return e.key})),from:function(e){return e.merged?{transform:"scale(1)"}:{transform:"scale(0)"}},enter:{transform:"scale(1)"},leave:{transform:"scale(0)"},config:{duration:0},children:function(e){return function(t){return Object(N.jsx)(A,{tile:e,enterLeaveStyles:t},e.key)}}})})},k=r(12),L=function(e){var t=e.startNewGame,r=e.toggleMusic,n=e.musicConfig;return Object(N.jsxs)("div",{className:"Controls",children:[Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return r()},title:n.title,children:Object(N.jsx)(k.a,{icon:["fas",n.icon]})})}),Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return t()},title:"New game (N)",children:Object(N.jsx)(k.a,{icon:["fas","gamepad"]})})}),Object(N.jsx)("div",{className:"ButtonWrapper",children:Object(N.jsx)("button",{className:"Button IconWrapper",onClick:function(){return r()},title:n.title,children:Object(N.jsx)(k.a,{icon:["fas","cog"]})})})]})},K=function(e){var t,r=e.size,a={musicOn:!1,icon:"music",title:"Play music"},o={musicOn:!0,icon:"stop",title:"Play music"},i=Object(c.useState)([]),h=Object(l.a)(i,2),b=h[0],p=h[1],g=Object(f.a)(j),v=Object(l.a)(g,2),x=v[0],y=v[1],A=y.stop,k=y.sound,K=(y.pause,Object(c.useState)(a)),S=Object(l.a)(K,2),W=S[0],B=S[1],C=(t=r,Array.from({length:t}).reduce((function(e,r,n){return e.push.apply(e,Object(m.a)(Array.from({length:t},(function(e,t){return{row:n+1,col:t+1}})))),e}),[])),R=Array.from({length:r},(function(e,t){return Object(N.jsx)("div",{className:"Row",style:{height:s,marginBottom:u},children:Array.from({length:r},(function(e,t){return Object(N.jsx)("div",{className:"Cell",style:{height:s,width:s,marginRight:u}},"cell-col-".concat(t+1))}))},"cell-row-".concat(t+1))})),E=Object(f.a)(d),F=Object(l.a)(E,1)[0];Object(c.useEffect)((function(){var e=function(e){var t=e.code,c=F,a="";if(t===n.ArrowUp||t===n.KeyUp?(a="up",c=F):t===n.ArrowDown||t===n.KeyDown?(c=F,a="down"):t===n.ArrowRight||t===n.KeyRight?(c=F,a="right"):t!==n.ArrowLeft&&t!==n.KeyLeft||(c=F,a="left"),a){c();var o=w(b,a,r),i=O(C,o,2);p(i),a=""}};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[b]);var G={height:450,width:450,padding:u};return Object(N.jsxs)("div",{className:"GameWrapper",children:[Object(N.jsx)(L,{startNewGame:function(){A(),B(o),p(O(C,[],2)),x(),k.fade(0,.3,3e3)},toggleMusic:function(){W.musicOn?(A(),k.fade(.3,0,3e3),B(a)):(x(),k.fade(0,.3,3e3),B(o))},musicConfig:W}),Object(N.jsxs)("div",{className:"BoardWrapper",style:G,children:[Object(N.jsx)("div",{className:"GridWrapper",children:R}),Object(N.jsx)(D,{tileList:b})]})]})};var S=function(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(K,{size:6})})},W=function(e){e&&e instanceof Function&&r.e(4).then(r.bind(null,64)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;r(e),n(e),c(e),a(e),o(e)}))},B=r(10),C=r(29),R=r(8);B.b.add(R.a,R.d,R.g,R.c,C.a,R.e,R.f,R.b);var E=function(){return Object(N.jsx)("div",{className:"Header",children:Object(N.jsx)("h1",{className:"Title",children:"2048"})})};var F=function(){return Object(N.jsxs)("div",{className:"Footer",children:[Object(N.jsx)("div",{className:"HrefWrapper",title:"Author",children:Object(N.jsxs)("a",{href:"https://github.com/GYegor",target:"_blank",children:[Object(N.jsx)("p",{children:Object(N.jsx)(k.a,{className:"FaIcon",icon:["fab","github"]})}),Object(N.jsx)("p",{children:"GYegor"})]})}),Object(N.jsx)("div",{className:"HrefWrapper",title:"Rolling Scopes School",children:Object(N.jsx)("a",{href:"https://rs.school/js/",target:"_blank",children:Object(N.jsx)("img",{src:"https://rs.school/images/rs_school_js.svg",alt:"RSSchool logo"})})})]})},G=Object(N.jsx)(i.a,{children:Object(N.jsxs)("div",{className:"Main",children:[Object(N.jsx)(E,{}),Object(N.jsx)(S,{}),Object(N.jsx)("div",{className:"Spacer"}),Object(N.jsx)(F,{})]})});o.a.render(G,document.getElementById("root")),W()}},[[60,1,2]]]);
//# sourceMappingURL=main.55ad022a.chunk.js.map